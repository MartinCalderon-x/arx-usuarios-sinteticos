# Reglas de Claude - Usuarios Sintéticos

Estas reglas son OBLIGATORIAS y deben seguirse estrictamente en todo momento.

---

## 1. Identidad en Git

### Configuración de Autor
SIEMPRE usar esta identidad para commits:
```
Nombre: martincalderon-x
Email: fc2003@gmail.com
```

### Prohibiciones en Commits
NUNCA mencionar en mensajes de commit, tags o cualquier mensaje de git:
- Claude
- AI / IA
- LLM
- Anthropic
- "generado por" / "generated by"
- "asistido por" / "assisted by"
- Cualquier referencia a inteligencia artificial

### Formato de Commit
```bash
git commit -m "$(cat <<'EOF'
Descripción del cambio

Detalles adicionales si es necesario
EOF
)"
```

NO incluir "Co-Authored-By" con referencias a Claude o AI.

---

## 2. Versionado Semántico

### Formato
```
vMAJOR.MINOR.PATCH
```

| Componente | Cuándo incrementar |
|------------|-------------------|
| MAJOR | Cambios incompatibles, rediseño completo |
| MINOR | Nueva funcionalidad compatible |
| PATCH | Correcciones de bugs, ajustes menores |

### Tipos de Release en Tags
- `[RELEASE]` - Versión estable para producción
- `[FEATURE]` - Nueva funcionalidad
- `[HOTFIX]` - Corrección urgente
- `[SECURITY]` - Parche de seguridad

### Formato de Tag
```bash
git tag -a vX.Y.Z -m "[TIPO] Descripción breve

Cambios:
- Cambio 1
- Cambio 2

Estado: FUNCIONAL"
```

### Regla de Oro
Solo crear tags en commits que dejen el proyecto en estado funcional.

---

## 3. Estructura del Proyecto

### Directorios Principales
```
factory/     → Herramientas de desarrollo (NO se despliega)
product/     → Código del producto (SE despliega)
```

### Backend (product/backend/)
- FastAPI como framework
- Gemini como Vision AI principal
- Qwen 2.5 VL como alternativa (placeholder)
- Supabase para base de datos

### Convenciones de Código
- Python: snake_case para funciones y variables
- TypeScript/React: camelCase para funciones, PascalCase para componentes
- Archivos de configuración en español cuando sea documentación

---

## 4. Tecnologías del Proyecto

| Componente | Tecnología |
|------------|------------|
| Backend | Python + FastAPI |
| Frontend | Vite + React + TypeScript |
| Base de datos | Supabase (PostgreSQL + pgvector) |
| Vision AI | Gemini Vision (principal) |
| Vision AI Alt | Qwen 2.5 VL (placeholder) |
| LLM | Gemini |
| Deploy | Google Cloud Run |
| Storage | Supabase Storage |

---

## 5. Flujo de Trabajo Git - Sistema Lineal

### Principio Fundamental
Usamos un **sistema de commits lineal** para poder volver rápidamente a cualquier estado anterior funcional.

```
v0.1.0 ──► commit ──► commit ──► v0.2.0 ──► commit ──► v0.3.0
   │                                │                      │
   └── funcional                    └── funcional          └── funcional
```

### Reglas del Sistema Lineal
1. **Commits atómicos** - Cada commit debe dejar el proyecto ejecutable
2. **Historial limpio** - Trabajar principalmente en `main`
3. **Tags como checkpoints** - Marcan versiones estables para restauración rápida
4. **Sin merge commits innecesarios** - Preferir rebase cuando sea posible

### Proceso de Commit
1. Verificar cambios: `git status`
2. Revisar diff: `git diff`
3. Agregar archivos: `git add <files>`
4. Commit SIN menciones a AI: `git commit -m "mensaje"`
5. Push: `git push origin main`

### Proceso de Release
1. Verificar que todo funciona
2. Crear tag: `git tag -a vX.Y.Z -m "[TIPO] descripción"`
3. Push con tags: `git push origin main --tags`

### Restauración Rápida
```bash
# Ver versiones disponibles
git tag -l -n1

# Volver a versión específica
git checkout vX.Y.Z

# O crear branch desde versión estable
git checkout -b fix-from-v0.2.0 v0.2.0
```

---

## 6. Variables de Entorno

### Requeridas para el Producto
```
GOOGLE_API_KEY          # Gemini API
SUPABASE_URL            # Base de datos
SUPABASE_SERVICE_ROLE_KEY
```

### Opcionales
```
QWEN_API_KEY            # Vision alternativo
ANTHROPIC_API_KEY       # Factory (Arx-SDK)
```

---

## 7. Seguridad

### Archivos que NUNCA deben commitearse
- `.env`
- `*.pem`
- `*credentials*.json`
- `*secret*`

### Revisar antes de commit
- No exponer API keys
- No incluir datos sensibles
- Verificar .gitignore

---

## Resumen de Prohibiciones

1. ❌ NO mencionar Claude/AI/LLM en commits
2. ❌ NO usar Co-Authored-By con referencias a AI
3. ❌ NO commitear archivos con credenciales
4. ❌ NO crear tags en código no funcional
5. ❌ NO desplegar código del factory/
